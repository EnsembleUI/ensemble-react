View:
  onLoad:
    invokeApi:
      name: getData
      onResponse:
        executeCode: |
          ensemble.storage.set("arrayOfUsers",response.body.users)

  body:
    Column:
      styles:
        crossAxis: stretch
      children:
        - Row:
            backgroundColor: white
            mainAxis: spaceBetween
            crossAxis: center
            padding: 10
            styles:
              borderBottom: "1px #D5DAEA solid"
            children:
              - Search:
                  styles:
                    width: 320px
                    height: 40px
                    borderRadius: 12
                    borderWidth: 2
                    borderStyle: solid
                    borderColor: "#B8BED6"
                  placeholder: Search
                  data: getData.body.users
                  searchKey: email
              - Row:
                  styles:
                    gap: 10
                  children:
                    - Avatar:
                        styles:
                          backgroundColor: "#171B2A"
                        alt: abc
                        name: Adam
                        menu:
                          - label: Personal Information
                            icon: Person
                            onTap:
                              executeCode: myText.setText("Spiderman")
                          - label: Collections
                            icon: Settings
                            onTap:
                              navigateScreen: Collections
        - Column:
            styles:
              padding: 0 40px
              backgroundColor: "#FAFAFA"
            children:
              - Markdown:
                  text: "# User Management"
              - TabBar:
                  id: tababr1
                  selectedIndex: 0
                  items:
                    - label: ${ "Groups(" + getData.body.limit+")"}
                      widget:
                        Column:
                          children:
                            - Row:
                                mainAxis: spaceBetween
                                children:
                                  - Search:
                                      styles:
                                        width: 320px
                                        height: 40px
                                        borderRadius: 12
                                        borderWidth: 2
                                        borderStyle: solid
                                        borderColor: "#B8BED6"
                                      placeholder: Search
                                      data: getData.body.users
                                      searchKey: email
                                  - Button:
                                      label: Create new group
                                      styles:
                                        backgroundColor: black
                                        padding: 16
                                      gap: 6
                                      startingIcon:
                                        name: Add
                                        color: white
                                        size: 22
                                      onTap:
                                        navigateModalScreen:
                                          name: Create Group
                                          maskClosable: false
                            - Conditional:
                                conditions:
                                  - if: ${!getData.body.users}
                                    Column:
                                      mainAxis: center
                                      crossAxis: center
                                      gap: 24
                                      children:
                                        - Column:
                                            styles:
                                              width: 200
                                              height: 200
                                              backgroundColor: "#D9D9D9"
                                              borderRadius: 100
                                            children:
                                              - Text:
                                                  text:
                                        - Column:
                                            crossAxis: center
                                            gap: 24
                                            children:
                                              - Column:
                                                  styles:
                                                    width: 200
                                                    height: 200
                                                    backgroundColor: "#D9D9D9"
                                                    borderRadius: 100
                                                  children:
                                                    - Text:
                                                        text:
                                              - Column:
                                                  crossAxis: center
                                                  children:
                                                    - Text:
                                                        text: Organize users into groups
                                                        styles:
                                                          fontSize: 22
                                                          color: black
                                                          fontWeight: 600
                                                    - Text:
                                                        text: Grant users messaging access by adding them to groups.

                                              - Button:
                                                  label: Create new group
                                                  styles:
                                                    backgroundColor: black
                                                    padding: 16
                                                  gap: 6
                                                  startingIcon:
                                                    name: Add
                                                    color: white
                                                    size: 22
                                                  onTap:
                                                    navigateModalScreen:
                                                      name: Create Group
                                                      maskClosable: false

                                  - else:
                                    GridView:
                                      item-template:
                                        data: ensemble.storage.get("arrayOfUsers")
                                        name: user
                                        template:
                                          Card:
                                            styles:
                                              shadowColor: lightgrey
                                              shadowOffset: 8px
                                              shadowBlur: 10px
                                              shadowSpread: -2px
                                              backgroundColor: white
                                            children:
                                              - Column:
                                                  children:
                                                    - Conditional:
                                                        conditions:
                                                          - if: ${user.image}
                                                            Image:
                                                              source: ${user.image}
                                                              width: 40
                                                              height: 40
                                                              fit: cover
                                                              borderRadius: 100
                                                          - else:
                                                            Avatar:
                                                              styles:
                                                                backgroundColor: "#D9D9D9"
                                                              alt: abc
                                                              name: ${user.firstName}
                                                    - Column:
                                                        styles:
                                                          crossAxis: center
                                                          gap: 5
                                                          marginTop: 20px
                                                        children:
                                                          - Column:
                                                              styles:
                                                                crossAxis: start
                                                              children:
                                                                - Text:
                                                                    text: ${user.firstName}
                                                                - Text:
                                                                    text: ${user.email}

                    - label: All Users
                      widget:
                        Row:
                          children:
                            - Column:
                                children:
                                  - Row:
                                      mainAxis: spaceBetween
                                      gap: 20
                                      children:
                                        - Search:
                                            styles:
                                              width: 320px
                                              height: 40px
                                              borderRadius: 12
                                              borderWidth: 2
                                              borderStyle: solid
                                              borderColor: "#B8BED6"
                                            placeholder: Search
                                            data: getData.body.users
                                            searchKey: email
                                        - Button:
                                            label: invite
                                            styles:
                                              backgroundColor: "#072CC4"
                                              padding: 16
                                            gap: 6
                                            startingIcon:
                                              name: Add
                                              color: white
                                              size: 22
                                            onTap:
                                              navigateModalScreen:
                                                name: Invite
                                                maskClosable: false
                                  - DataGrid:
                                      DataColumns:
                                        - label: User
                                        - label: Role
                                        - label: Groups
                                        - label: Last Active
                                      item-template:
                                        data: getData.body.users
                                        name: user
                                        template:
                                          DataRow:
                                            children:
                                              # Person
                                              - Row:
                                                  crossAxis: center
                                                  mainAxis: spaceBetween
                                                  gap: 5
                                                  children:
                                                    - Avatar:
                                                        styles:
                                                          backgroundColor: "#D9D9D9"
                                                        name: ${user.firstName}
                                                    - Column:
                                                        crossAxis: start
                                                        children:
                                                          - Text:
                                                              text: ${user.firstName}
                                                          - Text:
                                                              text: ${user.email}
                                              - Text:
                                                  text: user

                                              # MoM
                                              - Row:
                                                  crossAxis: center
                                                  gap: 10
                                                  children:
                                                    - Tag:
                                                        label: Administration
                                                        icon:
                                                          name: CloseOutlined
                                                        styles:
                                                          backgroundColor: "#FBF8EC"
                                                          borderRadius: 2
                                                    - Tag:
                                                        label: Human Resource
                                                        icon:
                                                          name: CloseOutlined
                                                        styles:
                                                          backgroundColor: "#FBF8EC"
                                                          borderRadius: 2

                                              - Text:
                                                  text: 1 day ago
                    - label: Contributors
                      widget:
                        Text:
                          text: contributors
                    - label: Admins
                      widget:
                        Text:
                          text: admins
API:
  getData:
    method: GET
    uri: https://dummyjson.com/users
    onResponse:
      executeCode: console.log("Hello")
