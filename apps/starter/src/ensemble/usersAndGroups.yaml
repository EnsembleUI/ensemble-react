View:
  onLoad:
    invokeApi:
      name: getData

  body:
    Column:
      styles:
        crossAxis: stretch
        margin: 0 20px
      children:
        - Row:
            backgroundColor: white
            mainAxis: spaceBetween
            crossAxis: center
            padding: 10
            children:
              - Search:
                  styles:
                    width: 320px
                    height: 40px
                    borderRadius: 12
                    borderWidth: 2
                    borderStyle: solid
                    borderColor: "#B8BED6"
                  placeholder: Search
                  data: getData.body.users
                  searchKey: email
              - Row:
                  styles:
                    gap: 10
                  children:
                    - Avatar:
                        alt: abc
                        name: sana
                        menu:
                          - label: Personal Information
                            icon: Person
                            onTap:
                              executeCode: myText.setText("Spiderman")
                          - label: Collections
                            icon: Settings
                            onTap:
                              navigateScreen: Collections

        - Markdown:
            text: "# User Management"
        - TabBar:
            id: tababr1
            selectedIndex: 0
            styles:
              tabFontWeight: bold
              inactiveTabColor: black
              activeTabColor: black
            items:
              - label: Groups
                widget:
                  Column:
                    children:
                      - Row:
                          gap: 10
                          mainAxis: start
                          crossAxis: center
                          children:
                            - Search:
                                styles:
                                  width: 320px
                                  height: 40px
                                  borderRadius: 5
                                  borderWidth: 2
                                  borderStyle: solid
                                  borderColor: "#D0D0D0"
                                data: getData.body.users
                                searchKey: email
                            - Button:
                                label: Create new group
                                startingIcon:
                                  name: AddOutlined
                                onTap:
                                  navigateModalScreen:
                                    name: Ask Embrace
                                    maskClosable: false
                                styles:
                                  backgroundColor: white
                                  borderColor: black
                                  borderRadius: 5
                                  borderWidth: 1px
                      - GridView:
                          item-template:
                            data: getData.body.users
                            name: user
                            template:
                              Card:
                                styles:
                                  shadowColor: lightgrey
                                  shadowOffset: 8px
                                  shadowBlur: 10px
                                  shadowSpread: -2px
                                  height: 150px
                                children:
                                  - Column:
                                      crossAxis: stretch
                                      mainAxis: spaceBetween
                                      gap: 10
                                      children:
                                        - Column:
                                            children:
                                              - Text:
                                                  text: ${user.firstName}
                                              - Tag:
                                                  label: ${user.email}
              - label: All Users
                widget:
                  Row:
                    children:
                      - Column:
                          children:
                            - DataGrid:
                                DataColumns:
                                  - label: User
                                  - label: Role
                                  - label: Groups
                                  - label: Last Active
                                item-template:
                                  data: getData.body.users
                                  name: user
                                  template:
                                    DataRow:
                                      children:
                                        # Person
                                        - Row:
                                            crossAxis: center
                                            gap: 5
                                            children:
                                              - Column:
                                                  crossAxis: start
                                                  children:
                                                    - Text:
                                                        text: ${user.firstName}
                                                    - Text:
                                                        text: ${user.email}
                                        - Text:
                                            text: user

                                        # MoM
                                        - Row:
                                            crossAxis: center
                                            gap: 10
                                            children:
                                              - Tag:
                                                  label: Administration
                                                  icon:
                                                    name: CloseOutlined
                                                  styles:
                                                    backgroundColor: "#FBF8EC"
                                                    borderRadius: 2
                                              - Tag:
                                                  label: Human Resource
                                                  icon:
                                                    name: CloseOutlined
                                                  styles:
                                                    backgroundColor: "#FBF8EC"
                                                    borderRadius: 2

                                        - Text:
                                            text: 1 day ago
              - label: Contributors
                widget:
                  Column:
                    children:
                      - Row:
                          gap: 20
                          mainAxis: start
                          crossAxis: center
                          children:
                            - Search:
                                styles:
                                  width: 320px
                                  height: 40px
                                  borderRadius: 5
                                  borderWidth: 2
                                  borderStyle: solid
                                  borderColor: "#D0D0D0"
                                data: getData.body.users
                                searchKey: email
                            - Button:
                                label: Create new group
                                startingIcon:
                                  name: AddOutlined
                                onTap:
                                  navigateModalScreen:
                                    name: Ask Embrace
                                    maskClosable: false
                                styles:
                                  backgroundColor: white
                                  borderColor: black
                                  borderRadius: 5
                                  borderWidth: 1px
                  
                            - DataGrid:
                                DataColumns:
                                  - label: User
                                  - label: Groups
                                  - label: Collection Access
                                  - label: Last Active
                                item-template:
                                  data: getData.body.records
                                  name: user
                                  template:
                                    DataRow:
                                      children:
                                        # Person
                                        - Row:
                                            crossAxis: center
                                            gap: 15
                                            minWidth: 250px
                                            children:
                                              - Avatar:
                                                  alt: sana
                                                  name: ${user.fields.name}
                                                  styles:
                                                    backgroundColor: "#F4F4F4"
                                                    color: grey
                                              - Column:
                                                  crossAxis: start
                                                  children:
                                                    
                                                    - Text:
                                                        text: ${user.fields.name}
                                                    - Text:
                                                        text: ${user.fields.email}
                                                        styles:
                                                          fontWeight: normal
                                                          fontSize: 12px
                                                          color: "#767676"
                                        - Row:
                                            crossAxis: center
                                            gap: 10
                                            
                                            children:
                                              - Tag:
                                                  label: ${user.fields.groups}
                                                  styles:
                                                    backgroundColor: "#FBF8EC"
                                                    borderRadius: 8
                                              

                                        # MoM
                                        - Row:
                                            crossAxis: center
                                            gap: 10
                                            children:
                                              - Tag:
                                                  label: ${user.fields.collection_access}
                                                  styles:
                                                    backgroundColor: "#E9ECF4"
                                                    borderRadius: 8
                                              

                                        - Text:
                                            text: ${user.fields.last_Active}
                                            styles:
                                              fontWeight: normal
                                              fontSize: 12px
                                              color: "#767676"
              - label: Admins
                widget:
                  Column:
                    children:
                      - Row:
                          gap: 20
                          mainAxis: start
                          crossAxis: center
                          children:
                            - Search:
                                styles:
                                  width: 320px
                                  height: 40px
                                  borderRadius: 5
                                  borderWidth: 2
                                  borderStyle: solid
                                  borderColor: "#D0D0D0"
                                data: getData.body.users
                                searchKey: email
                            - Button:
                                label: Create new group
                                startingIcon:
                                  name: AddOutlined
                                onTap:
                                  navigateModalScreen:
                                    name: Ask Embrace
                                    maskClosable: false
                                styles:
                                  backgroundColor: white
                                  borderColor: black
                                  borderRadius: 5
                                  borderWidth: 1px
                      - DataGrid:
                          DataColumns:
                            - label: User
                            - label: Last Active
                          item-template:
                            data: getData.body.records
                            name: user
                            template:
                              DataRow:
                                children:
                                  # Person
                                  - Row:
                                      crossAxis: center
                                      gap: 15
                                      children: 
                                        - Avatar:
                                            alt: sana
                                            name: ${user.fields.name}
                                            styles:
                                              backgroundColor: "#F4F4F4"
                                              color: grey                                       
                                        - Column:
                                            crossAxis: start
                                            children:
                                              - Text:
                                                  text: ${user.fields.name}
                                              - Text:
                                                  text: ${user.fields.email}
                                                  styles:
                                                    fontWeight: normal
                                                    fontSize: 12px
                                                    color: "#767676"
                                  - Text:
                                      text: ${user.fields.last_Active}
                                      styles:
                                        fontWeight: normal
                                        fontSize: 12px
                                        color: "#767676"

        # - Row:
        #     styles:
        #       backgroundColor: white
        #       mainAxis: spaceBetween
        #       crossAxis: center
        #       padding: 10
        #     children:
              # - Search:
              #     styles:
              #       width: 300px
              #       backgroundColor: white
              #       border: 1px solid grey
              #       margin: 5px 5px 5px 5px
              # - Row:
              #     styles:
              #       gap: 10
              #     children:
                    # - Icons:
                    #     label: Notifications
                    #     hasNotification: true
                    #     styles:
                    #       backgroundColor: white
                    #       borderWidth: 1px
                    #       borderColor: grey
                    #       iconWidth: 25
                    #       iconHeight: 25
                    #       width: 45
                    #       height: 45
                    #       notificationStyles:
                    #         backgroundColor: "#6DC4E5"
                    # - ProfileIcon:
                    #     # source: https://tostatus.in/wp-content/uploads/2023/02/Single-Boy-for-Whatsapp-DP-Download-2023-1024x1024.jpg
                    #     name: Francisco
                    #     styles:
                    #       backgroundColor: "#28304B"
                    

API:
  getData:    
    uri: https://api.airtable.com/v0/app0FnT5yUsW9fjn6/tblWGM6o7vqlTfB8b
    method: GET
    headers:
      Authorization: Bearer patN2XAiLVZQ8Yp3h.2bddb84031b2be89b576f01869dc17c3826e16ae7daa8895f92c05a0799004ab
   
