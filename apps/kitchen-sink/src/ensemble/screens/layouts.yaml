View:
  onLoad:
    invokeApi:
      name: getDummyProducts
      onResponse:
        executeCode: |
          const res = response.body.products;
          ensemble.storage.set("products", res)
  header:
    title:
      Header:

  body:
    Column:
      styles:
        names: page
      children:
        - Text:
            styles:
              names: heading-1
            text: Layouts
        - Markdown:
            text: This screen demonstrates a few patterns to get you started with Ensemble. Here, we fetch data from an API and use control expressions to display a loading state and a list of products. Try making a few changes and see how the screen automatically updates! For more information, see [help](/help).
        - Text:
            styles:
              names: heading-3
            text: Grid View
        - LoadingContainer:
            isLoading: ${getDummyProducts.isLoading}
            widget:
              GridView:
                item-template:
                  data: ${getDummyProducts.body.products}
                  name: product
                  template:
                    Card:
                      children:
                        - Text:
                            text: ${product.title}
        - Text:
            styles:
              names: heading-3
            text: Collapsible
        - Collapsible:
            id: collapseWidget
            collpaseIcon:
              name: HomeOutlined
            expandIcon:
              name: WidgetsOutlined
            expandIconPosition: "end"
            item-template:
              data:
                [
                  { key: "1", name: "Label 1", std: "Hello" },
                  { key: "2", name: "Label 2", std: "Hello 123" },
                  { key: "3", name: "Label 3", std: "Hello 456" },
                ]
              name: item
              template:
                collapsibleItem:
                  key: ${item.key}
                  label: ${item.name}
                  children: ${item.std}
            onCollapse:
              executeCode: |
                console.log('Hello', data, collapseWidget)
        - Collapsible:
            expandIconPosition: "end"
            items:
              - key: "1"
                label:
                  Text:
                    text: Here is my label 1
                children: hiii
              - key: "2"
                label: Here is my label 2
                children:
                  Text:
                    text: Here is my value 2
            onCollapse:
              executeCode: |
                console.log('Hello', data)                            

  footer:
    children:
      - Text:
          text: Give support us
    styles:
      backgroundColor: red
API:
  getDummyProducts:
    method: GET
    uri: https://dummyjson.com/products
